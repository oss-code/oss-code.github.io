<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>LLVMFileUtils.cc source code [pocl/lib/llvmopencl/LLVMFileUtils.cc] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'pocl/lib/llvmopencl/LLVMFileUtils.cc'; var root_path = '../../..'; var data_path = '../../../../data';</script>
<script src='../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../..'>pocl</a>/<a href='..'>lib</a>/<a href='./'>llvmopencl</a>/<a href='LLVMFileUtils.cc.html'>LLVMFileUtils.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i>    Copyright (c) 2016-2017 Tampere University of Technology.</i></td></tr>
<tr><th id="3">3</th><td><i></i></td></tr>
<tr><th id="4">4</th><td><i>    Permission is hereby granted, free of charge, to any person obtaining a</i></td></tr>
<tr><th id="5">5</th><td><i>    copy of this software and associated documentation files (the "Software"),</i></td></tr>
<tr><th id="6">6</th><td><i>    to deal in the Software without restriction, including without limitation</i></td></tr>
<tr><th id="7">7</th><td><i>    the rights to use, copy, modify, merge, publish, distribute, sublicense,</i></td></tr>
<tr><th id="8">8</th><td><i>    and/or sell copies of the Software, and to permit persons to whom the</i></td></tr>
<tr><th id="9">9</th><td><i>    Software is furnished to do so, subject to the following conditions:</i></td></tr>
<tr><th id="10">10</th><td><i></i></td></tr>
<tr><th id="11">11</th><td><i>    The above copyright notice and this permission notice shall be included in</i></td></tr>
<tr><th id="12">12</th><td><i>    all copies or substantial portions of the Software.</i></td></tr>
<tr><th id="13">13</th><td><i></i></td></tr>
<tr><th id="14">14</th><td><i>    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</i></td></tr>
<tr><th id="15">15</th><td><i>    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</i></td></tr>
<tr><th id="16">16</th><td><i>    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</i></td></tr>
<tr><th id="17">17</th><td><i>    THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</i></td></tr>
<tr><th id="18">18</th><td><i>    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</i></td></tr>
<tr><th id="19">19</th><td><i>    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</i></td></tr>
<tr><th id="20">20</th><td><i>    DEALINGS IN THE SOFTWARE.</i></td></tr>
<tr><th id="21">21</th><td><i> */</i></td></tr>
<tr><th id="22">22</th><td><i class="doc">/**</i></td></tr>
<tr><th id="23">23</th><td><i class="doc"> *<span class="command"> @file</span> LLVMFileUtils.cc</i></td></tr>
<tr><th id="24">24</th><td><i class="doc"> *</i></td></tr>
<tr><th id="25">25</th><td><i class="doc"> * File utility functions based on LLVM APIs.</i></td></tr>
<tr><th id="26">26</th><td><i class="doc"> *</i></td></tr>
<tr><th id="27">27</th><td><i class="doc"> * <span class="command">@author</span> Michal Babej 2016. 2017</i></td></tr>
<tr><th id="28">28</th><td><i class="doc"> */</i></td></tr>
<tr><th id="29">29</th><td></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../../config.h.html">"config.h"</a></u></td></tr>
<tr><th id="31">31</th><td></td></tr>
<tr><th id="32">32</th><td><u>#<span data-ppcond="32">if</span> !defined(<span class="macro" data-ref="_M/_MSC_VER">_MSC_VER</span>) &amp;&amp; !defined(<span class="macro" data-ref="_M/__MINGW32__">__MINGW32__</span>)</u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../../include/unistd.h.html">&lt;unistd.h&gt;</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../../include/x86_64-linux-gnu/sys/types.h.html">&lt;sys/types.h&gt;</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../../include/x86_64-linux-gnu/sys/stat.h.html">&lt;sys/stat.h&gt;</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../include/fcntl.h.html">&lt;fcntl.h&gt;</a></u></td></tr>
<tr><th id="37">37</th><td><u>#<span data-ppcond="37">ifdef</span> <a class="macro" href="../../config.h.html#68" data-ref="_M/HAVE_UTIME">HAVE_UTIME</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../../include/utime.h.html">&lt;utime.h&gt;</a></u></td></tr>
<tr><th id="39">39</th><td><u>#<span data-ppcond="37">endif</span></u></td></tr>
<tr><th id="40">40</th><td><u>#<span data-ppcond="32">else</span></u></td></tr>
<tr><th id="41">41</th><td><u>#include &lt;io.h&gt;</u></td></tr>
<tr><th id="42">42</th><td><u>#<span data-ppcond="32">endif</span></u></td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../../include/assert.h.html">&lt;assert.h&gt;</a></u></td></tr>
<tr><th id="45">45</th><td></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../../include/c++/7/iostream.html">&lt;iostream&gt;</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../../../include/c++/7/fstream.html">&lt;fstream&gt;</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../../../include/c++/7/vector.html">&lt;vector&gt;</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../include/c++/7/sstream.html">&lt;sstream&gt;</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../../../include/c++/7/string.html">&lt;string&gt;</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../include/c++/7/cstdio.html">&lt;cstdio&gt;</a></u></td></tr>
<tr><th id="52">52</th><td></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../../include/pocl.h.html">"pocl.h"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../include/pocl_file_util.h.html">"pocl_file_util.h"</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../CL/pocl_timing.h.html">"pocl_timing.h"</a></u></td></tr>
<tr><th id="56">56</th><td></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="CompilerWarnings.h.html">"CompilerWarnings.h"</a></u></td></tr>
<tr><th id="58">58</th><td><a class="macro" href="CompilerWarnings.h.html#29" title="" data-ref="_M/IGNORE_COMPILER_WARNING">IGNORE_COMPILER_WARNING</a>(<q>"-Wunused-parameter"</q>)</td></tr>
<tr><th id="59">59</th><td></td></tr>
<tr><th id="60">60</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html">"llvm/Support/FileSystem.h"</a></u></td></tr>
<tr><th id="61">61</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Support/FormattedStream.h.html">"llvm/Support/FormattedStream.h"</a></u></td></tr>
<tr><th id="62">62</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Support/Path.h.html">"llvm/Support/Path.h"</a></u></td></tr>
<tr><th id="63">63</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Support/raw_os_ostream.h.html">"llvm/Support/raw_os_ostream.h"</a></u></td></tr>
<tr><th id="64">64</th><td></td></tr>
<tr><th id="65">65</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Bitcode/BitcodeReader.h.html">"llvm/Bitcode/BitcodeReader.h"</a></u></td></tr>
<tr><th id="66">66</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Bitcode/BitcodeWriter.h.html">"llvm/Bitcode/BitcodeWriter.h"</a></u></td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td><u>#include <a href="../../../include/llvm-6.0/llvm/Support/Errc.h.html">&lt;llvm/Support/Errc.h&gt;</a></u></td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td><a class="macro" href="CompilerWarnings.h.html#48" title="" data-ref="_M/POP_COMPILER_DIAGS">POP_COMPILER_DIAGS</a></td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td><u>#define <dfn class="macro" id="_M/RETURN_IF_EC" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</dfn> if (<a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec"><a class="local col6 ref" href="#136ec" title='ec' data-ref="136ec"><a class="local col5 ref" href="#145ec" title='ec' data-ref="145ec"><a class="local col3 ref" href="#163ec" title='ec' data-ref="163ec"><a class="local col5 ref" href="#175ec" title='ec' data-ref="175ec"><a class="local col5 ref" href="#185ec" title='ec' data-ref="185ec">ec</a></a></a></a></a></a>) return <a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec"><a class="local col6 ref" href="#136ec" title='ec' data-ref="136ec"><a class="local col5 ref" href="#145ec" title='ec' data-ref="145ec"><a class="local col3 ref" href="#163ec" title='ec' data-ref="163ec"><a class="local col5 ref" href="#175ec" title='ec' data-ref="175ec"><a class="local col5 ref" href="#185ec" title='ec' data-ref="185ec">ec</a></a></a></a></a></a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>()</u></td></tr>
<tr><th id="73">73</th><td><u>#define <dfn class="macro" id="_M/OPEN_FOR_READ" data-ref="_M/OPEN_FOR_READ">OPEN_FOR_READ</dfn> ec = sys::fs::openFileForRead(p, fd)</u></td></tr>
<tr><th id="74">74</th><td><u>#define <dfn class="macro" id="_M/CREATE_UNIQUE_FILE" data-ref="_M/CREATE_UNIQUE_FILE">CREATE_UNIQUE_FILE</dfn>(S)                                                  \</u></td></tr>
<tr><th id="75">75</th><td><u>  <a class="local col5 ref" href="#145ec" title='ec' data-ref="145ec"><a class="local col3 ref" href="#163ec" title='ec' data-ref="163ec"><a class="local col5 ref" href="#175ec" title='ec' data-ref="175ec"><a class="local col5 ref" href="#185ec" title='ec' data-ref="185ec">ec</a></a></a></a> <a class="ref" href="../../../include/c++/7/system_error.html#146" title='std::error_code::operator=' data-ref="_ZNSt10error_codeaSEOS_">=</a> sys::fs::<a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs16createUniqueFileERKNS_5TwineERiRNS_15SmallVectorImplIcEEjNS1_9OpenFlagsE" title='llvm::sys::fs::createUniqueFile' data-ref="_ZN4llvm3sys2fs16createUniqueFileERKNS_5TwineERiRNS_15SmallVectorImplIcEEjNS1_9OpenFlagsE">createUniqueFile</a>((<a class="local col1 ref" href="#141p" title='p' data-ref="141p"><a class="local col4 ref" href="#164p" title='p' data-ref="164p"><a class="local col6 ref" href="#176p" title='p' data-ref="176p"><a class="local col4 ref" href="#184p" title='p' data-ref="184p">p</a></a></a></a> <a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvmplERKNS_5TwineES2_" title='llvm::operator+' data-ref="_ZN4llvmplERKNS_5TwineES2_">+</a> S), <span class='refarg'><a class="local col4 ref" href="#144fd" title='fd' data-ref="144fd"><a class="local col2 ref" href="#162fd" title='fd' data-ref="162fd"><a class="local col4 ref" href="#174fd" title='fd' data-ref="174fd"><a class="local col3 ref" href="#183fd" title='fd' data-ref="183fd">fd</a></a></a></a></span>, <span class='refarg'><a class="local col3 ref" href="#143TmpPath" title='TmpPath' data-ref="143TmpPath"><a class="local col5 ref" href="#165TmpPath" title='TmpPath' data-ref="165TmpPath"><a class="local col8 ref" href="#178TmpPath" title='TmpPath' data-ref="178TmpPath"><a class="local col7 ref" href="#187TmpPath" title='TmpPath' data-ref="187TmpPath">TmpPath</a></a></a></a></span>,                         \</u></td></tr>
<tr><th id="76">76</th><td><u>                                 sys::fs::<a class="type" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::perms" title='llvm::sys::fs::perms' data-ref="llvm::sys::fs::perms">perms</a>::<a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::perms::owner_read" title='llvm::sys::fs::perms::owner_read' data-ref="llvm::sys::fs::perms::owner_read">owner_read</a> <a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fsorENS1_5permsES2_" title='llvm::sys::fs::operator|' data-ref="_ZN4llvm3sys2fsorENS1_5permsES2_">|</a>                  \</u></td></tr>
<tr><th id="77">77</th><td><u>                                     sys::fs::<a class="type" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::perms" title='llvm::sys::fs::perms' data-ref="llvm::sys::fs::perms">perms</a>::<a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::perms::owner_write" title='llvm::sys::fs::perms::owner_write' data-ref="llvm::sys::fs::perms::owner_write">owner_write</a>);</u></td></tr>
<tr><th id="78">78</th><td></td></tr>
<tr><th id="79">79</th><td><u>#<span data-ppcond="79">ifdef</span> <a class="macro" href="../../include/pocl.h.html#382" data-ref="_M/LLVM_OLDER_THAN_7_0">LLVM_OLDER_THAN_7_0</a></u></td></tr>
<tr><th id="80">80</th><td><u>#define <dfn class="macro" id="_M/OPEN_CREATE" data-ref="_M/OPEN_CREATE">OPEN_CREATE</dfn> ec = sys::fs::openFileForWrite(p, fd, sys::fs::F_RW)</u></td></tr>
<tr><th id="81">81</th><td><u>#define <dfn class="macro" id="_M/OPEN_FOR_APPEND" data-ref="_M/OPEN_FOR_APPEND">OPEN_FOR_APPEND</dfn>                                                        \</u></td></tr>
<tr><th id="82">82</th><td><u>  <a class="local col3 ref" href="#163ec" title='ec' data-ref="163ec">ec</a> <a class="ref" href="../../../include/c++/7/system_error.html#146" title='std::error_code::operator=' data-ref="_ZNSt10error_codeaSEOS_">=</a> sys::fs::<a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs16openFileForWriteERKNS_5TwineERiNS1_9OpenFlagsEj" title='llvm::sys::fs::openFileForWrite' data-ref="_ZN4llvm3sys2fs16openFileForWriteERKNS_5TwineERiNS1_9OpenFlagsEj">openFileForWrite</a>(<a class="local col4 ref" href="#164p" title='p' data-ref="164p">p</a>, <span class='refarg'><a class="local col2 ref" href="#162fd" title='fd' data-ref="162fd">fd</a></span>, sys::fs::<a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::OpenFlags::F_RW" title='llvm::sys::fs::OpenFlags::F_RW' data-ref="llvm::sys::fs::OpenFlags::F_RW">F_RW</a> <a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fsorENS1_9OpenFlagsES2_" title='llvm::sys::fs::operator|' data-ref="_ZN4llvm3sys2fsorENS1_9OpenFlagsES2_">|</a> sys::fs::<a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::OpenFlags::F_Append" title='llvm::sys::fs::OpenFlags::F_Append' data-ref="llvm::sys::fs::OpenFlags::F_Append">F_Append</a>)</u></td></tr>
<tr><th id="83">83</th><td><u>#<span data-ppcond="79">else</span></u></td></tr>
<tr><th id="84">84</th><td><u>#define OPEN_CREATE                                                            \</u></td></tr>
<tr><th id="85">85</th><td><u>  ec = sys::fs::openFileForWrite(p, fd, sys::fs::CD_CreateAlways,              \</u></td></tr>
<tr><th id="86">86</th><td><u>                                 sys::fs::OF_None)</u></td></tr>
<tr><th id="87">87</th><td><u>#define OPEN_FOR_APPEND                                                        \</u></td></tr>
<tr><th id="88">88</th><td><u>  ec = sys::fs::openFileForWrite(p, fd, sys::fs::CD_CreateAlways,              \</u></td></tr>
<tr><th id="89">89</th><td><u>                                 sys::fs::OF_Append)</u></td></tr>
<tr><th id="90">90</th><td><u>#<span data-ppcond="79">endif</span></u></td></tr>
<tr><th id="91">91</th><td></td></tr>
<tr><th id="92">92</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm</span>;</td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td><em>static</em> <em>const</em> <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="tu decl def" id="random_pattern" title='random_pattern' data-type='const llvm::Twine' data-ref="random_pattern">random_pattern</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><q>"-%%-%%-%%-%%-%%"</q>);</td></tr>
<tr><th id="95">95</th><td></td></tr>
<tr><th id="96">96</th><td><i>/*****************************************************************************/</i></td></tr>
<tr><th id="97">97</th><td></td></tr>
<tr><th id="98">98</th><td><em>int</em></td></tr>
<tr><th id="99">99</th><td><dfn class="decl def" id="pocl_rm_rf" title='pocl_rm_rf' data-ref="pocl_rm_rf">pocl_rm_rf</dfn>(<em>const</em> <em>char</em>* <dfn class="local col0 decl" id="100path" title='path' data-type='const char *' data-ref="100path">path</dfn>) {</td></tr>
<tr><th id="100">100</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col1 decl" id="101ec" title='ec' data-type='std::error_code' data-ref="101ec">ec</dfn>;</td></tr>
<tr><th id="101">101</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#llvm::SmallString" title='llvm::SmallString' data-ref="llvm::SmallString">SmallString</a>&lt;<var>128</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallStringC1Ev" title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev"></a><dfn class="local col2 decl" id="102DirNative" title='DirNative' data-type='SmallString&lt;128&gt;' data-ref="102DirNative">DirNative</dfn>;</td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td>    <span class="namespace">sys::path::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/Path.h.html#_ZN4llvm3sys4path6nativeERKNS_5TwineERNS_15SmallVectorImplIcEENS1_5StyleE" title='llvm::sys::path::native' data-ref="_ZN4llvm3sys4path6nativeERKNS_5TwineERNS_15SmallVectorImplIcEENS1_5StyleE">native</a>(<a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col0 ref" href="#100path" title='path' data-ref="100path">path</a>), <span class='refarg'><a class="local col2 ref" href="#102DirNative" title='DirNative' data-ref="102DirNative">DirNative</a></span>);</td></tr>
<tr><th id="104">104</th><td></td></tr>
<tr><th id="105">105</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">std::</span><a class="typedef" href="../../../include/c++/7/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a>&gt; <a class="ref fake" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col3 decl" id="103FileSet" title='FileSet' data-type='std::vector&lt;std::string&gt;' data-ref="103FileSet">FileSet</dfn>, <a class="ref fake" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev"></a><dfn class="local col4 decl" id="104DirSet" title='DirSet' data-type='std::vector&lt;std::string&gt;' data-ref="104DirSet">DirSet</dfn>;</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td>    <b>for</b> (<span class="namespace">sys::fs::</span><a class="type" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::recursive_directory_iterator" title='llvm::sys::fs::recursive_directory_iterator' data-ref="llvm::sys::fs::recursive_directory_iterator">recursive_directory_iterator</a> <dfn class="local col5 decl" id="105Dir" title='Dir' data-type='sys::fs::recursive_directory_iterator' data-ref="105Dir">Dir</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs28recursive_directory_iteratorC1ERKNS_5TwineERSt10error_codeb" title='llvm::sys::fs::recursive_directory_iterator::recursive_directory_iterator' data-ref="_ZN4llvm3sys2fs28recursive_directory_iteratorC1ERKNS_5TwineERSt10error_codeb">(</a><a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col2 ref" href="#102DirNative" title='DirNative' data-ref="102DirNative">DirNative</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZNK4llvm11SmallString3strEv" title='llvm::SmallString::str' data-ref="_ZNK4llvm11SmallString3strEv">str</a>(), <a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec">ec</a>), <a class="ref fake" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs28recursive_directory_iteratorC1Ev" title='llvm::sys::fs::recursive_directory_iterator::recursive_directory_iterator' data-ref="_ZN4llvm3sys2fs28recursive_directory_iteratorC1Ev"></a><dfn class="local col6 decl" id="106DirEnd" title='DirEnd' data-type='sys::fs::recursive_directory_iterator' data-ref="106DirEnd">DirEnd</dfn>;</td></tr>
<tr><th id="108">108</th><td>         <a class="local col5 ref" href="#105Dir" title='Dir' data-ref="105Dir">Dir</a> <a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZNK4llvm3sys2fs28recursive_directory_iteratorneERKS2_" title='llvm::sys::fs::recursive_directory_iterator::operator!=' data-ref="_ZNK4llvm3sys2fs28recursive_directory_iteratorneERKS2_">!=</a> <a class="local col6 ref" href="#106DirEnd" title='DirEnd' data-ref="106DirEnd">DirEnd</a> &amp;&amp; !<a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec">ec</a>; <a class="local col5 ref" href="#105Dir" title='Dir' data-ref="105Dir">Dir</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs28recursive_directory_iterator9incrementERSt10error_code" title='llvm::sys::fs::recursive_directory_iterator::increment' data-ref="_ZN4llvm3sys2fs28recursive_directory_iterator9incrementERSt10error_code">increment</a>(<span class='refarg'><a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec">ec</a></span>)) {</td></tr>
<tr><th id="109">109</th><td>        <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col7 decl" id="107p" title='p' data-type='llvm::Twine' data-ref="107p">p</dfn> = <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="local col5 ref" href="#105Dir" title='Dir' data-ref="105Dir">Dir</a><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZNK4llvm3sys2fs28recursive_directory_iteratorptEv" title='llvm::sys::fs::recursive_directory_iterator::operator-&gt;' data-ref="_ZNK4llvm3sys2fs28recursive_directory_iteratorptEv">-&gt;</a><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZNK4llvm3sys2fs15directory_entry4pathB5cxx11Ev" title='llvm::sys::fs::directory_entry::path' data-ref="_ZNK4llvm3sys2fs15directory_entry4pathB5cxx11Ev">path</a>();</td></tr>
<tr><th id="110">110</th><td>        <span class="namespace">std::</span><a class="typedef" href="../../../include/c++/7/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <dfn class="local col8 decl" id="108s" title='s' data-type='std::string' data-ref="108s">s</dfn> = <a class="local col7 ref" href="#107p" title='p' data-ref="107p">p</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZNK4llvm5Twine3strB5cxx11Ev" title='llvm::Twine::str' data-ref="_ZNK4llvm5Twine3strB5cxx11Ev">str</a>();</td></tr>
<tr><th id="111">111</th><td>        <b>if</b> (<span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs12is_directoryERKNS_5TwineE" title='llvm::sys::fs::is_directory' data-ref="_ZN4llvm3sys2fs12is_directoryERKNS_5TwineE">is_directory</a>(<a class="local col7 ref" href="#107p" title='p' data-ref="107p">p</a>)) {</td></tr>
<tr><th id="112">112</th><td>            <a class="local col4 ref" href="#104DirSet" title='DirSet' data-ref="104DirSet">DirSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col8 ref" href="#108s" title='s' data-ref="108s">s</a>);</td></tr>
<tr><th id="113">113</th><td>        } <b>else</b></td></tr>
<tr><th id="114">114</th><td>            <a class="local col3 ref" href="#103FileSet" title='FileSet' data-ref="103FileSet">FileSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector9push_backERKT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backERKT_">push_back</a>(<a class="local col8 ref" href="#108s" title='s' data-ref="108s">s</a>);</td></tr>
<tr><th id="115">115</th><td>    }</td></tr>
<tr><th id="116">116</th><td>    <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="117">117</th><td></td></tr>
<tr><th id="118">118</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">std::</span><a class="typedef" href="../../../include/c++/7/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a>&gt;::<a class="typedef" href="../../../include/c++/7/bits/stl_vector.h.html#std::vector{std::__cxx11::basic_string{char},std::allocator{std::__cxx11::basic_string{char}}}::iterator" title='std::vector&lt;std::__cxx11::basic_string&lt;char&gt;, std::allocator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt;::iterator' data-type='__gnu_cxx::__normal_iterator&lt;pointer, vector&lt;basic_string&lt;char&gt;, allocator&lt;basic_string&lt;char&gt; &gt; &gt; &gt;' data-ref="std::vector{std::__cxx11::basic_string{char},std::allocator{std::__cxx11::basic_string{char}}}::iterator">iterator</a> <a class="ref fake" href="../../../include/c++/7/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}" title='__gnu_cxx::__normal_iterator::__normal_iterator&lt;_Iterator, _Container&gt;' data-ref="__gnu_cxx::__normal_iterator::__normal_iterator{_Iterator,_Container}"></a><dfn class="local col9 decl" id="109it" title='it' data-type='std::vector&lt;std::string&gt;::iterator' data-ref="109it">it</dfn>;</td></tr>
<tr><th id="119">119</th><td>    <b>for</b> (<a class="local col9 ref" href="#109it" title='it' data-ref="109it">it</a> <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#763" title='__gnu_cxx::__normal_iterator&lt;std::__cxx11::basic_string&lt;char&gt; *, std::vector&lt;std::__cxx11::basic_string&lt;char&gt;, std::allocator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt; &gt;::operator=' data-ref="__gnu_cxx::__normal_iterator{std::__cxx11::basic_string{char}*,std::vector{std::__cxx11::basic_string{char},std::allocator{std::__cxx11::basic_string{char}}}}::operator=">=</a> <a class="local col3 ref" href="#103FileSet" title='FileSet' data-ref="103FileSet">FileSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNSt6vector5beginEv">begin</a>(); <a class="local col9 ref" href="#109it" title='it' data-ref="109it">it</a> <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#__gnu_cxx::operator!=" title='__gnu_cxx::operator!=' data-ref="__gnu_cxx::operator!=">!=</a> <a class="local col3 ref" href="#103FileSet" title='FileSet' data-ref="103FileSet">FileSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>(); <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator++" title='__gnu_cxx::__normal_iterator::operator++' data-ref="__gnu_cxx::__normal_iterator::operator++">++</a><a class="local col9 ref" href="#109it" title='it' data-ref="109it">it</a>) {</td></tr>
<tr><th id="120">120</th><td>        <a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec">ec</a> <a class="ref" href="../../../include/c++/7/system_error.html#146" title='std::error_code::operator=' data-ref="_ZNSt10error_codeaSEOS_">=</a> <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6removeERKNS_5TwineEb" title='llvm::sys::fs::remove' data-ref="_ZN4llvm3sys2fs6removeERKNS_5TwineEb">remove</a>(<a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#__gnu_cxx::__normal_iterator::operator*" title='__gnu_cxx::__normal_iterator::operator*' data-ref="__gnu_cxx::__normal_iterator::operator*">*</a><a class="local col9 ref" href="#109it" title='it' data-ref="109it">it</a>, <b>true</b>);</td></tr>
<tr><th id="121">121</th><td>        <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="122">122</th><td>    }</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td>    <span class="namespace">std::</span><a class="ref" href="../../../include/c++/7/bits/stl_algo.h.html#_ZSt4sortT_S_" title='std::sort' data-ref="_ZSt4sortT_S_">sort</a>(<a class="local col4 ref" href="#104DirSet" title='DirSet' data-ref="104DirSet">DirSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector5beginEv" title='std::vector::begin' data-ref="_ZNSt6vector5beginEv">begin</a>(), <a class="local col4 ref" href="#104DirSet" title='DirSet' data-ref="104DirSet">DirSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector3endEv" title='std::vector::end' data-ref="_ZNSt6vector3endEv">end</a>());</td></tr>
<tr><th id="125">125</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector">vector</a>&lt;<span class="namespace">std::</span><a class="typedef" href="../../../include/c++/7/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a>&gt;::<a class="typedef" href="../../../include/c++/7/bits/stl_vector.h.html#std::vector{std::__cxx11::basic_string{char},std::allocator{std::__cxx11::basic_string{char}}}::reverse_iterator" title='std::vector&lt;std::__cxx11::basic_string&lt;char&gt;, std::allocator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt;::reverse_iterator' data-type='std::reverse_iterator&lt;iterator&gt;' data-ref="std::vector{std::__cxx11::basic_string{char},std::allocator{std::__cxx11::basic_string{char}}}::reverse_iterator">reverse_iterator</a> <a class="ref fake" href="../../../include/c++/7/bits/stl_iterator.h.html#_ZNSt16reverse_iteratorC1Ev" title='std::reverse_iterator::reverse_iterator&lt;_Iterator&gt;' data-ref="_ZNSt16reverse_iteratorC1Ev"></a><dfn class="local col0 decl" id="110it2" title='it2' data-type='std::vector&lt;std::string&gt;::reverse_iterator' data-ref="110it2">it2</dfn>;</td></tr>
<tr><th id="126">126</th><td>    <b>for</b> (<a class="local col0 ref" href="#110it2" title='it2' data-ref="110it2">it2</a> <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#101" title='std::reverse_iterator&lt;__gnu_cxx::__normal_iterator&lt;std::__cxx11::basic_string&lt;char&gt; *, std::vector&lt;std::__cxx11::basic_string&lt;char&gt;, std::allocator&lt;std::__cxx11::basic_string&lt;char&gt; &gt; &gt; &gt; &gt;::operator=' data-ref="_ZNSt16reverse_iteratorIN9__gnu_cxx17__normal_iteratorIPNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEESt6vectorIS7_SaIS7_EEEEEaSERKSD_">=</a> <a class="local col4 ref" href="#104DirSet" title='DirSet' data-ref="104DirSet">DirSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector6rbeginEv" title='std::vector::rbegin' data-ref="_ZNSt6vector6rbeginEv">rbegin</a>(); <a class="local col0 ref" href="#110it2" title='it2' data-ref="110it2">it2</a> <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#_ZStneRKSt16reverse_iteratorIT_ES3_" title='std::operator!=' data-ref="_ZStneRKSt16reverse_iteratorIT_ES3_">!=</a> <a class="local col4 ref" href="#104DirSet" title='DirSet' data-ref="104DirSet">DirSet</a>.<a class="ref" href="../../../include/c++/7/bits/stl_vector.h.html#_ZNSt6vector4rendEv" title='std::vector::rend' data-ref="_ZNSt6vector4rendEv">rend</a>(); <a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#_ZNSt16reverse_iteratorppEv" title='std::reverse_iterator::operator++' data-ref="_ZNSt16reverse_iteratorppEv">++</a><a class="local col0 ref" href="#110it2" title='it2' data-ref="110it2">it2</a>) {</td></tr>
<tr><th id="127">127</th><td>        <a class="local col1 ref" href="#101ec" title='ec' data-ref="101ec">ec</a> <a class="ref" href="../../../include/c++/7/system_error.html#146" title='std::error_code::operator=' data-ref="_ZNSt10error_codeaSEOS_">=</a> <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6removeERKNS_5TwineEb" title='llvm::sys::fs::remove' data-ref="_ZN4llvm3sys2fs6removeERKNS_5TwineEb">remove</a>(<a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></a><a class="ref" href="../../../include/c++/7/bits/stl_iterator.h.html#_ZNKSt16reverse_iteratordeEv" title='std::reverse_iterator::operator*' data-ref="_ZNKSt16reverse_iteratordeEv">*</a><a class="local col0 ref" href="#110it2" title='it2' data-ref="110it2">it2</a>, <b>true</b>);</td></tr>
<tr><th id="128">128</th><td>        <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="129">129</th><td>    }</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td>    <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6removeERKNS_5TwineEb" title='llvm::sys::fs::remove' data-ref="_ZN4llvm3sys2fs6removeERKNS_5TwineEb">remove</a>(<a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col0 ref" href="#100path" title='path' data-ref="100path">path</a>));</td></tr>
<tr><th id="132">132</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="133">133</th><td>}</td></tr>
<tr><th id="134">134</th><td></td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td><em>int</em></td></tr>
<tr><th id="137">137</th><td><dfn class="decl def" id="pocl_mkdir_p" title='pocl_mkdir_p' data-ref="pocl_mkdir_p">pocl_mkdir_p</dfn>(<em>const</em> <em>char</em>* <dfn class="local col1 decl" id="111path" title='path' data-type='const char *' data-ref="111path">path</dfn>) {</td></tr>
<tr><th id="138">138</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col2 decl" id="112p" title='p' data-type='llvm::Twine' data-ref="112p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col1 ref" href="#111path" title='path' data-ref="111path">path</a>);</td></tr>
<tr><th id="139">139</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col3 decl" id="113ec" title='ec' data-type='std::error_code' data-ref="113ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs18create_directoriesERKNS_5TwineEbNS1_5permsE" title='llvm::sys::fs::create_directories' data-ref="_ZN4llvm3sys2fs18create_directoriesERKNS_5TwineEbNS1_5permsE">create_directories</a>(<a class="local col2 ref" href="#112p" title='p' data-ref="112p">p</a>, <b>true</b>);</td></tr>
<tr><th id="140">140</th><td>    <b>return</b> <a class="local col3 ref" href="#113ec" title='ec' data-ref="113ec">ec</a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>();</td></tr>
<tr><th id="141">141</th><td>}</td></tr>
<tr><th id="142">142</th><td></td></tr>
<tr><th id="143">143</th><td><em>int</em></td></tr>
<tr><th id="144">144</th><td><dfn class="decl def" id="pocl_remove" title='pocl_remove' data-ref="pocl_remove">pocl_remove</dfn>(<em>const</em> <em>char</em>* <dfn class="local col4 decl" id="114path" title='path' data-type='const char *' data-ref="114path">path</dfn>) {</td></tr>
<tr><th id="145">145</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col5 decl" id="115p" title='p' data-type='llvm::Twine' data-ref="115p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col4 ref" href="#114path" title='path' data-ref="114path">path</a>);</td></tr>
<tr><th id="146">146</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col6 decl" id="116ec" title='ec' data-type='std::error_code' data-ref="116ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6removeERKNS_5TwineEb" title='llvm::sys::fs::remove' data-ref="_ZN4llvm3sys2fs6removeERKNS_5TwineEb">remove</a>(<a class="local col5 ref" href="#115p" title='p' data-ref="115p">p</a>, <b>true</b>);</td></tr>
<tr><th id="147">147</th><td>    <b>return</b> <a class="local col6 ref" href="#116ec" title='ec' data-ref="116ec">ec</a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>();</td></tr>
<tr><th id="148">148</th><td>}</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td><em>int</em> <dfn class="decl def" id="_Z12pocl_remove2RN4llvm5TwineE" title='pocl_remove2' data-ref="_Z12pocl_remove2RN4llvm5TwineE">pocl_remove2</dfn>(<a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> &amp;<dfn class="local col7 decl" id="117p" title='p' data-type='llvm::Twine &amp;' data-ref="117p">p</dfn>) {</td></tr>
<tr><th id="151">151</th><td>  <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col8 decl" id="118ec" title='ec' data-type='std::error_code' data-ref="118ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6removeERKNS_5TwineEb" title='llvm::sys::fs::remove' data-ref="_ZN4llvm3sys2fs6removeERKNS_5TwineEb">remove</a>(<a class="local col7 ref" href="#117p" title='p' data-ref="117p">p</a>, <b>true</b>);</td></tr>
<tr><th id="152">152</th><td>  <b>return</b> <a class="local col8 ref" href="#118ec" title='ec' data-ref="118ec">ec</a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>();</td></tr>
<tr><th id="153">153</th><td>}</td></tr>
<tr><th id="154">154</th><td></td></tr>
<tr><th id="155">155</th><td><em>int</em> <dfn class="decl def" id="_Z12pocl_exists2RN4llvm5TwineE" title='pocl_exists2' data-ref="_Z12pocl_exists2RN4llvm5TwineE">pocl_exists2</dfn>(<a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> &amp;<dfn class="local col9 decl" id="119p" title='p' data-type='llvm::Twine &amp;' data-ref="119p">p</dfn>) {</td></tr>
<tr><th id="156">156</th><td>  <b>return</b> (<span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6existsERKNS_5TwineE" title='llvm::sys::fs::exists' data-ref="_ZN4llvm3sys2fs6existsERKNS_5TwineE">exists</a>(<a class="local col9 ref" href="#119p" title='p' data-ref="119p">p</a>) ? <var>1</var> : <var>0</var>);</td></tr>
<tr><th id="157">157</th><td>}</td></tr>
<tr><th id="158">158</th><td></td></tr>
<tr><th id="159">159</th><td><em>int</em></td></tr>
<tr><th id="160">160</th><td><dfn class="decl def" id="pocl_exists" title='pocl_exists' data-ref="pocl_exists">pocl_exists</dfn>(<em>const</em> <em>char</em>* <dfn class="local col0 decl" id="120path" title='path' data-type='const char *' data-ref="120path">path</dfn>) {</td></tr>
<tr><th id="161">161</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col1 decl" id="121p" title='p' data-type='llvm::Twine' data-ref="121p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col0 ref" href="#120path" title='path' data-ref="120path">path</a>);</td></tr>
<tr><th id="162">162</th><td>    <b>return</b> <a class="ref" href="#_Z12pocl_exists2RN4llvm5TwineE" title='pocl_exists2' data-ref="_Z12pocl_exists2RN4llvm5TwineE">pocl_exists2</a>(<span class='refarg'><a class="local col1 ref" href="#121p" title='p' data-ref="121p">p</a></span>);</td></tr>
<tr><th id="163">163</th><td>}</td></tr>
<tr><th id="164">164</th><td></td></tr>
<tr><th id="165">165</th><td></td></tr>
<tr><th id="166">166</th><td><em>int</em> <dfn class="decl def" id="pocl_touch_file" title='pocl_touch_file' data-ref="pocl_touch_file">pocl_touch_file</dfn>(<em>const</em> <em>char</em>* <dfn class="local col2 decl" id="122path" title='path' data-type='const char *' data-ref="122path">path</dfn>) {</td></tr>
<tr><th id="167">167</th><td><u>#<span data-ppcond="167">ifdef</span> <a class="macro" href="../../config.h.html#68" data-ref="_M/HAVE_UTIME">HAVE_UTIME</a></u></td></tr>
<tr><th id="168">168</th><td>    <em>int</em> <dfn class="local col3 decl" id="123res" title='res' data-type='int' data-ref="123res">res</dfn> = <a class="ref" href="../../../include/utime.h.html#utime" title='utime' data-ref="utime">utime</a>(<a class="local col2 ref" href="#122path" title='path' data-ref="122path">path</a>, <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="169">169</th><td>    <b>return</b> (<a class="local col3 ref" href="#123res" title='res' data-ref="123res">res</a> ? <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : <var>0</var>);</td></tr>
<tr><th id="170">170</th><td><u>#<span data-ppcond="167">elif</span> defined(HAVE_FUTIMENS)</u></td></tr>
<tr><th id="171">171</th><td>    Twine p(path);</td></tr>
<tr><th id="172">172</th><td>    <em>int</em> fd;</td></tr>
<tr><th id="173">173</th><td>    std::error_code ec;</td></tr>
<tr><th id="174">174</th><td></td></tr>
<tr><th id="175">175</th><td>    OPEN_CREATE;</td></tr>
<tr><th id="176">176</th><td>    RETURN_IF_EC;</td></tr>
<tr><th id="177">177</th><td>    futimens(fd, NULL);</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>    <b>return</b> (close(fd) ? errno : <var>0</var>);</td></tr>
<tr><th id="180">180</th><td><u>#else</u></td></tr>
<tr><th id="181">181</th><td><u>#warning No utime or futimens found, pocl will not update cache timestamps</u></td></tr>
<tr><th id="182">182</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="183">183</th><td><u>#<span data-ppcond="167">endif</span></u></td></tr>
<tr><th id="184">184</th><td>}</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td><em>int</em> <dfn class="decl def" id="pocl_rename" title='pocl_rename' data-ref="pocl_rename">pocl_rename</dfn>(<em>const</em> <em>char</em> *<dfn class="local col4 decl" id="124oldpath" title='oldpath' data-type='const char *' data-ref="124oldpath">oldpath</dfn>, <em>const</em> <em>char</em> *<dfn class="local col5 decl" id="125newpath" title='newpath' data-type='const char *' data-ref="125newpath">newpath</dfn>) {</td></tr>
<tr><th id="187">187</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col6 decl" id="126op" title='op' data-type='llvm::Twine' data-ref="126op">op</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col4 ref" href="#124oldpath" title='oldpath' data-ref="124oldpath">oldpath</a>);</td></tr>
<tr><th id="188">188</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col7 decl" id="127np" title='np' data-type='llvm::Twine' data-ref="127np">np</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col5 ref" href="#125newpath" title='newpath' data-ref="125newpath">newpath</a>);</td></tr>
<tr><th id="189">189</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col8 decl" id="128ec" title='ec' data-type='std::error_code' data-ref="128ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6renameERKNS_5TwineES4_" title='llvm::sys::fs::rename' data-ref="_ZN4llvm3sys2fs6renameERKNS_5TwineES4_">rename</a>(<a class="local col6 ref" href="#126op" title='op' data-ref="126op">op</a>, <a class="local col7 ref" href="#127np" title='np' data-ref="127np">np</a>);</td></tr>
<tr><th id="190">190</th><td>    <b>return</b> <a class="local col8 ref" href="#128ec" title='ec' data-ref="128ec">ec</a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>();</td></tr>
<tr><th id="191">191</th><td>}</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td><em>int</em> <dfn class="decl def" id="_Z12pocl_rename2RN4llvm5TwineES1_" title='pocl_rename2' data-ref="_Z12pocl_rename2RN4llvm5TwineES1_">pocl_rename2</dfn>(<a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> &amp;<dfn class="local col9 decl" id="129op" title='op' data-type='llvm::Twine &amp;' data-ref="129op">op</dfn>, <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> &amp;<dfn class="local col0 decl" id="130np" title='np' data-type='llvm::Twine &amp;' data-ref="130np">np</dfn>) {</td></tr>
<tr><th id="194">194</th><td>  <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col1 decl" id="131ec" title='ec' data-type='std::error_code' data-ref="131ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs6renameERKNS_5TwineES4_" title='llvm::sys::fs::rename' data-ref="_ZN4llvm3sys2fs6renameERKNS_5TwineES4_">rename</a>(<a class="local col9 ref" href="#129op" title='op' data-ref="129op">op</a>, <a class="local col0 ref" href="#130np" title='np' data-ref="130np">np</a>);</td></tr>
<tr><th id="195">195</th><td>  <b>return</b> <a class="local col1 ref" href="#131ec" title='ec' data-ref="131ec">ec</a>.<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt10error_code23default_error_conditionEv" title='std::error_code::default_error_condition' data-ref="_ZNKSt10error_code23default_error_conditionEv">default_error_condition</a>().<a class="ref" href="../../../include/c++/7/system_error.html#_ZNKSt15error_condition5valueEv" title='std::error_condition::value' data-ref="_ZNKSt15error_condition5valueEv">value</a>();</td></tr>
<tr><th id="196">196</th><td>}</td></tr>
<tr><th id="197">197</th><td></td></tr>
<tr><th id="198">198</th><td><em>int</em> <dfn class="decl def" id="pocl_mk_tempdir" title='pocl_mk_tempdir' data-ref="pocl_mk_tempdir">pocl_mk_tempdir</dfn>(<em>char</em> *<dfn class="local col2 decl" id="132output" title='output' data-type='char *' data-ref="132output">output</dfn>, <em>const</em> <em>char</em> *<dfn class="local col3 decl" id="133prefix" title='prefix' data-type='const char *' data-ref="133prefix">prefix</dfn>) {</td></tr>
<tr><th id="199">199</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col4 decl" id="134p" title='p' data-type='llvm::Twine' data-ref="134p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col3 ref" href="#133prefix" title='prefix' data-ref="133prefix">prefix</a>);</td></tr>
<tr><th id="200">200</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#llvm::SmallString" title='llvm::SmallString' data-ref="llvm::SmallString">SmallString</a>&lt;<var>512</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallStringC1Ev" title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev"></a><dfn class="local col5 decl" id="135TmpPath" title='TmpPath' data-type='SmallString&lt;512&gt;' data-ref="135TmpPath">TmpPath</dfn>;</td></tr>
<tr><th id="201">201</th><td></td></tr>
<tr><th id="202">202</th><td>  <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <dfn class="local col6 decl" id="136ec" title='ec' data-type='std::error_code' data-ref="136ec">ec</dfn> = <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs21createUniqueDirectoryERKNS_5TwineERNS_15SmallVectorImplIcEE" title='llvm::sys::fs::createUniqueDirectory' data-ref="_ZN4llvm3sys2fs21createUniqueDirectoryERKNS_5TwineERNS_15SmallVectorImplIcEE">createUniqueDirectory</a>(<a class="local col4 ref" href="#134p" title='p' data-ref="134p">p</a>, <span class='refarg'><a class="local col5 ref" href="#135TmpPath" title='TmpPath' data-ref="135TmpPath">TmpPath</a></span>);</td></tr>
<tr><th id="203">203</th><td>  <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="204">204</th><td></td></tr>
<tr><th id="205">205</th><td>  <a class="ref" href="../../../include/string.h.html#strncpy" title='strncpy' data-ref="strncpy">strncpy</a>(<a class="local col2 ref" href="#132output" title='output' data-ref="132output">output</a>, <a class="local col5 ref" href="#135TmpPath" title='TmpPath' data-ref="135TmpPath">TmpPath</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallString5c_strEv" title='llvm::SmallString::c_str' data-ref="_ZN4llvm11SmallString5c_strEv">c_str</a>(), <a class="macro" href="../../include/pocl.h.html#48" title="1024" data-ref="_M/POCL_FILENAME_LENGTH">POCL_FILENAME_LENGTH</a>);</td></tr>
<tr><th id="206">206</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="207">207</th><td>}</td></tr>
<tr><th id="208">208</th><td></td></tr>
<tr><th id="209">209</th><td><em>int</em> <dfn class="decl def" id="pocl_mk_tempname" title='pocl_mk_tempname' data-ref="pocl_mk_tempname">pocl_mk_tempname</dfn>(<em>char</em> *<dfn class="local col7 decl" id="137output" title='output' data-type='char *' data-ref="137output">output</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="138prefix" title='prefix' data-type='const char *' data-ref="138prefix">prefix</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="139suffix" title='suffix' data-type='const char *' data-ref="139suffix">suffix</dfn>,</td></tr>
<tr><th id="210">210</th><td>                     <em>int</em> *<dfn class="local col0 decl" id="140ret_fd" title='ret_fd' data-type='int *' data-ref="140ret_fd">ret_fd</dfn>) {</td></tr>
<tr><th id="211">211</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col1 decl" id="141p" title='p' data-type='llvm::Twine' data-ref="141p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col8 ref" href="#138prefix" title='prefix' data-ref="138prefix">prefix</a>);</td></tr>
<tr><th id="212">212</th><td>  <b>if</b> (<a class="local col9 ref" href="#139suffix" title='suffix' data-ref="139suffix">suffix</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="213">213</th><td>    <a class="local col9 ref" href="#139suffix" title='suffix' data-ref="139suffix">suffix</a> = <q>""</q>;</td></tr>
<tr><th id="214">214</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col2 decl" id="142suf" title='suf' data-type='llvm::Twine' data-ref="142suf">suf</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col9 ref" href="#139suffix" title='suffix' data-ref="139suffix">suffix</a>);</td></tr>
<tr><th id="215">215</th><td></td></tr>
<tr><th id="216">216</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#llvm::SmallString" title='llvm::SmallString' data-ref="llvm::SmallString">SmallString</a>&lt;<var>512</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallStringC1Ev" title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev"></a><dfn class="local col3 decl" id="143TmpPath" title='TmpPath' data-type='SmallString&lt;512&gt;' data-ref="143TmpPath">TmpPath</dfn>;</td></tr>
<tr><th id="217">217</th><td>  <em>int</em> <dfn class="local col4 decl" id="144fd" title='fd' data-type='int' data-ref="144fd">fd</dfn>;</td></tr>
<tr><th id="218">218</th><td>  <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col5 decl" id="145ec" title='ec' data-type='std::error_code' data-ref="145ec">ec</dfn>;</td></tr>
<tr><th id="219">219</th><td></td></tr>
<tr><th id="220">220</th><td>  <a class="macro" href="#74" title="ec = sys::fs::createUniqueFile((p + random_pattern + suf), fd, TmpPath, sys::fs::perms::owner_read | sys::fs::perms::owner_write);" data-ref="_M/CREATE_UNIQUE_FILE">CREATE_UNIQUE_FILE</a>(<a class="tu ref" href="#random_pattern" title='random_pattern' data-use='r' data-ref="random_pattern">random_pattern</a> <a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvmplERKNS_5TwineES2_" title='llvm::operator+' data-ref="_ZN4llvmplERKNS_5TwineES2_">+</a> <a class="local col2 ref" href="#142suf" title='suf' data-ref="142suf">suf</a>);</td></tr>
<tr><th id="221">221</th><td>  <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td>  <b>if</b> (<a class="local col0 ref" href="#140ret_fd" title='ret_fd' data-ref="140ret_fd">ret_fd</a>)</td></tr>
<tr><th id="224">224</th><td>    *<a class="local col0 ref" href="#140ret_fd" title='ret_fd' data-ref="140ret_fd">ret_fd</a> = <a class="local col4 ref" href="#144fd" title='fd' data-ref="144fd">fd</a>;</td></tr>
<tr><th id="225">225</th><td>  <b>else</b> {</td></tr>
<tr><th id="226">226</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#close" title='close' data-ref="close">close</a>(<a class="local col4 ref" href="#144fd" title='fd' data-ref="144fd">fd</a>))</td></tr>
<tr><th id="227">227</th><td>      <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="228">228</th><td>  }</td></tr>
<tr><th id="229">229</th><td></td></tr>
<tr><th id="230">230</th><td>  <a class="ref" href="../../../include/string.h.html#strncpy" title='strncpy' data-ref="strncpy">strncpy</a>(<a class="local col7 ref" href="#137output" title='output' data-ref="137output">output</a>, <a class="local col3 ref" href="#143TmpPath" title='TmpPath' data-ref="143TmpPath">TmpPath</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallString5c_strEv" title='llvm::SmallString::c_str' data-ref="_ZN4llvm11SmallString5c_strEv">c_str</a>(), <a class="macro" href="../../include/pocl.h.html#48" title="1024" data-ref="_M/POCL_FILENAME_LENGTH">POCL_FILENAME_LENGTH</a>);</td></tr>
<tr><th id="231">231</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="232">232</th><td>}</td></tr>
<tr><th id="233">233</th><td></td></tr>
<tr><th id="234">234</th><td><i>/****************************************************************************/</i></td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td><u>#define <dfn class="macro" id="_M/CHUNK_SIZE" data-ref="_M/CHUNK_SIZE">CHUNK_SIZE</dfn> (2 * 1024 * 1024)</u></td></tr>
<tr><th id="237">237</th><td></td></tr>
<tr><th id="238">238</th><td><em>int</em></td></tr>
<tr><th id="239">239</th><td><dfn class="decl def" id="pocl_read_file" title='pocl_read_file' data-ref="pocl_read_file">pocl_read_file</dfn>(<em>const</em> <em>char</em>* <dfn class="local col6 decl" id="146path" title='path' data-type='const char *' data-ref="146path">path</dfn>, <em>char</em>** <dfn class="local col7 decl" id="147content" title='content' data-type='char **' data-ref="147content">content</dfn>, <a class="typedef" href="../../../include/stdint.h.html#uint64_t" title='uint64_t' data-type='unsigned long' data-ref="uint64_t">uint64_t</a> *<dfn class="local col8 decl" id="148filesize" title='filesize' data-type='uint64_t *' data-ref="148filesize">filesize</dfn>) {</td></tr>
<tr><th id="240">240</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(content);</td></tr>
<tr><th id="241">241</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(path);</td></tr>
<tr><th id="242">242</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(filesize);</td></tr>
<tr><th id="243">243</th><td>    *<a class="local col7 ref" href="#147content" title='content' data-ref="147content">content</a> = <b>nullptr</b>;</td></tr>
<tr><th id="244">244</th><td>    *<a class="local col8 ref" href="#148filesize" title='filesize' data-ref="148filesize">filesize</a> = <var>0</var>;</td></tr>
<tr><th id="245">245</th><td></td></tr>
<tr><th id="246">246</th><td>    <em>int</em> <dfn class="local col9 decl" id="149fd" title='fd' data-type='int' data-ref="149fd">fd</dfn>;</td></tr>
<tr><th id="247">247</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col0 decl" id="150ec" title='ec' data-type='std::error_code' data-ref="150ec">ec</dfn>;</td></tr>
<tr><th id="248">248</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col1 decl" id="151p" title='p' data-type='llvm::Twine' data-ref="151p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col6 ref" href="#146path" title='path' data-ref="146path">path</a>);</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>    <i>/* files in /proc return zero size, while</i></td></tr>
<tr><th id="251">251</th><td><i>       files in /sys return size larger than actual content size;</i></td></tr>
<tr><th id="252">252</th><td><i>       this reads the content sequentially.  */</i></td></tr>
<tr><th id="253">253</th><td>    <a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col2 decl" id="152total_size" title='total_size' data-type='ssize_t' data-ref="152total_size">total_size</dfn> = <var>0</var>;</td></tr>
<tr><th id="254">254</th><td>    <a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col3 decl" id="153actually_read" title='actually_read' data-type='ssize_t' data-ref="153actually_read">actually_read</dfn> = <var>0</var>;</td></tr>
<tr><th id="255">255</th><td>    <em>char</em> *<dfn class="local col4 decl" id="154ptr" title='ptr' data-type='char *' data-ref="154ptr">ptr</dfn> = (<em>char</em> *)<a class="ref" href="../../../include/stdlib.h.html#malloc" title='malloc' data-ref="malloc">malloc</a>(<a class="macro" href="#236" title="(2 * 1024 * 1024)" data-ref="_M/CHUNK_SIZE">CHUNK_SIZE</a> + <var>1</var>);</td></tr>
<tr><th id="256">256</th><td>    <b>if</b> (<a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a> == <b>nullptr</b>)</td></tr>
<tr><th id="257">257</th><td>      <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>    <a class="local col0 ref" href="#150ec" title='ec' data-ref="150ec">ec</a> <a class="ref" href="../../../include/c++/7/system_error.html#146" title='std::error_code::operator=' data-ref="_ZNSt10error_codeaSEOS_">=</a> <span class="namespace">sys::fs::</span><a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fs15openFileForReadERKNS_5TwineERiPNS_15SmallVectorImplIcEE" title='llvm::sys::fs::openFileForRead' data-ref="_ZN4llvm3sys2fs15openFileForReadERKNS_5TwineERiPNS_15SmallVectorImplIcEE">openFileForRead</a>(<a class="local col1 ref" href="#151p" title='p' data-ref="151p">p</a>, <span class='refarg'><a class="local col9 ref" href="#149fd" title='fd' data-ref="149fd">fd</a></span>);</td></tr>
<tr><th id="260">260</th><td>    <b>if</b> (<a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNKSt10error_codecvbEv" title='std::error_code::operator bool' data-ref="_ZNKSt10error_codecvbEv"></a><a class="local col0 ref" href="#150ec" title='ec' data-ref="150ec">ec</a>)</td></tr>
<tr><th id="261">261</th><td>      <b>goto</b> <a class="lbl" href="#155ERROR" data-ref="155ERROR">ERROR</a>;</td></tr>
<tr><th id="262">262</th><td></td></tr>
<tr><th id="263">263</th><td>    <b>do</b> {</td></tr>
<tr><th id="264">264</th><td>      <em>char</em> *<dfn class="local col6 decl" id="156reallocated" title='reallocated' data-type='char *' data-ref="156reallocated">reallocated</dfn> = (<em>char</em> *)<a class="ref" href="../../../include/stdlib.h.html#realloc" title='realloc' data-ref="realloc">realloc</a>(<a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a>, (<a class="local col2 ref" href="#152total_size" title='total_size' data-ref="152total_size">total_size</a> + <a class="macro" href="#236" title="(2 * 1024 * 1024)" data-ref="_M/CHUNK_SIZE">CHUNK_SIZE</a> + <var>1</var>));</td></tr>
<tr><th id="265">265</th><td>      <b>if</b> (<a class="local col6 ref" href="#156reallocated" title='reallocated' data-ref="156reallocated">reallocated</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="266">266</th><td>        <b>goto</b> <a class="lbl" href="#155ERROR" data-ref="155ERROR">ERROR</a>;</td></tr>
<tr><th id="267">267</th><td>      <a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a> = <a class="local col6 ref" href="#156reallocated" title='reallocated' data-ref="156reallocated">reallocated</a>;</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>      <a class="local col3 ref" href="#153actually_read" title='actually_read' data-ref="153actually_read">actually_read</a> = <a class="ref" href="../../../include/unistd.h.html#read" title='read' data-ref="read">read</a>(<a class="local col9 ref" href="#149fd" title='fd' data-ref="149fd">fd</a>, <a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a> + <a class="local col2 ref" href="#152total_size" title='total_size' data-ref="152total_size">total_size</a>, <a class="macro" href="#236" title="(2 * 1024 * 1024)" data-ref="_M/CHUNK_SIZE">CHUNK_SIZE</a>);</td></tr>
<tr><th id="270">270</th><td>      <b>if</b> (<a class="local col3 ref" href="#153actually_read" title='actually_read' data-ref="153actually_read">actually_read</a> &gt; <var>0</var>)</td></tr>
<tr><th id="271">271</th><td>        <a class="local col2 ref" href="#152total_size" title='total_size' data-ref="152total_size">total_size</a> += <a class="local col3 ref" href="#153actually_read" title='actually_read' data-ref="153actually_read">actually_read</a>;</td></tr>
<tr><th id="272">272</th><td></td></tr>
<tr><th id="273">273</th><td>    } <b>while</b> (<a class="local col3 ref" href="#153actually_read" title='actually_read' data-ref="153actually_read">actually_read</a> &gt; <var>0</var>);</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td>    <b>if</b> (<a class="local col3 ref" href="#153actually_read" title='actually_read' data-ref="153actually_read">actually_read</a> &lt; <var>0</var>)</td></tr>
<tr><th id="276">276</th><td>      <b>goto</b> <a class="lbl" href="#155ERROR" data-ref="155ERROR">ERROR</a>;</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#close" title='close' data-ref="close">close</a>(<a class="local col9 ref" href="#149fd" title='fd' data-ref="149fd">fd</a>))</td></tr>
<tr><th id="279">279</th><td>      <b>goto</b> <a class="lbl" href="#155ERROR" data-ref="155ERROR">ERROR</a>;</td></tr>
<tr><th id="280">280</th><td></td></tr>
<tr><th id="281">281</th><td>  <i>/* add an extra NULL character for strings */</i></td></tr>
<tr><th id="282">282</th><td>    <a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a>[<a class="local col2 ref" href="#152total_size" title='total_size' data-ref="152total_size">total_size</a>] = <var>0</var>;</td></tr>
<tr><th id="283">283</th><td>    *<a class="local col7 ref" href="#147content" title='content' data-ref="147content">content</a> = <a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a>;</td></tr>
<tr><th id="284">284</th><td>    *<a class="local col8 ref" href="#148filesize" title='filesize' data-ref="148filesize">filesize</a> = (<a class="typedef" href="../../../include/stdint.h.html#uint64_t" title='uint64_t' data-type='unsigned long' data-ref="uint64_t">uint64_t</a>)<a class="local col2 ref" href="#152total_size" title='total_size' data-ref="152total_size">total_size</a>;</td></tr>
<tr><th id="285">285</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td><dfn class="lbl" id="155ERROR" data-ref="155ERROR">ERROR</dfn>:</td></tr>
<tr><th id="288">288</th><td>    <a class="ref" href="../../../include/stdlib.h.html#free" title='free' data-ref="free">free</a> (<a class="local col4 ref" href="#154ptr" title='ptr' data-ref="154ptr">ptr</a>);</td></tr>
<tr><th id="289">289</th><td>    <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="290">290</th><td>}</td></tr>
<tr><th id="291">291</th><td></td></tr>
<tr><th id="292">292</th><td><i>/* Atomic write - with rename() */</i></td></tr>
<tr><th id="293">293</th><td><em>int</em> <dfn class="decl def" id="pocl_write_file" title='pocl_write_file' data-ref="pocl_write_file">pocl_write_file</dfn>(<em>const</em> <em>char</em> *<dfn class="local col7 decl" id="157path" title='path' data-type='const char *' data-ref="157path">path</dfn>, <em>const</em> <em>char</em> *<dfn class="local col8 decl" id="158content" title='content' data-type='const char *' data-ref="158content">content</dfn>, <a class="typedef" href="../../../include/stdint.h.html#uint64_t" title='uint64_t' data-type='unsigned long' data-ref="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="159count" title='count' data-type='uint64_t' data-ref="159count">count</dfn>,</td></tr>
<tr><th id="294">294</th><td>                    <em>int</em> <dfn class="local col0 decl" id="160append" title='append' data-type='int' data-ref="160append">append</dfn>, <em>int</em> <dfn class="local col1 decl" id="161dont_rewrite" title='dont_rewrite' data-type='int' data-ref="161dont_rewrite">dont_rewrite</dfn>) {</td></tr>
<tr><th id="295">295</th><td>    <em>int</em> <dfn class="local col2 decl" id="162fd" title='fd' data-type='int' data-ref="162fd">fd</dfn>;</td></tr>
<tr><th id="296">296</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col3 decl" id="163ec" title='ec' data-type='std::error_code' data-ref="163ec">ec</dfn>;</td></tr>
<tr><th id="297">297</th><td></td></tr>
<tr><th id="298">298</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(path);</td></tr>
<tr><th id="299">299</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(content);</td></tr>
<tr><th id="300">300</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col4 decl" id="164p" title='p' data-type='llvm::Twine' data-ref="164p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col7 ref" href="#157path" title='path' data-ref="157path">path</a>);</td></tr>
<tr><th id="301">301</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<em>char</em>, <var>128</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col5 decl" id="165TmpPath" title='TmpPath' data-type='SmallVector&lt;char, 128&gt;' data-ref="165TmpPath">TmpPath</dfn>;</td></tr>
<tr><th id="302">302</th><td></td></tr>
<tr><th id="303">303</th><td>    <b>if</b> (<a class="ref" href="#_Z12pocl_exists2RN4llvm5TwineE" title='pocl_exists2' data-ref="_Z12pocl_exists2RN4llvm5TwineE">pocl_exists2</a>(<span class='refarg'><a class="local col4 ref" href="#164p" title='p' data-ref="164p">p</a></span>)) {</td></tr>
<tr><th id="304">304</th><td>      <b>if</b> (<a class="local col1 ref" href="#161dont_rewrite" title='dont_rewrite' data-ref="161dont_rewrite">dont_rewrite</a>) {</td></tr>
<tr><th id="305">305</th><td>        <b>if</b> (!<a class="local col0 ref" href="#160append" title='append' data-ref="160append">append</a>)</td></tr>
<tr><th id="306">306</th><td>          <b>return</b> <var>0</var>;</td></tr>
<tr><th id="307">307</th><td>      } <b>else</b> {</td></tr>
<tr><th id="308">308</th><td>        <em>int</em> <dfn class="local col6 decl" id="166res" title='res' data-type='int' data-ref="166res">res</dfn> = <a class="ref" href="#_Z12pocl_remove2RN4llvm5TwineE" title='pocl_remove2' data-ref="_Z12pocl_remove2RN4llvm5TwineE">pocl_remove2</a>(<span class='refarg'><a class="local col4 ref" href="#164p" title='p' data-ref="164p">p</a></span>);</td></tr>
<tr><th id="309">309</th><td>        <b>if</b> (<a class="local col6 ref" href="#166res" title='res' data-ref="166res">res</a>)</td></tr>
<tr><th id="310">310</th><td>          <b>return</b> <a class="local col6 ref" href="#166res" title='res' data-ref="166res">res</a>;</td></tr>
<tr><th id="311">311</th><td>      }</td></tr>
<tr><th id="312">312</th><td>    }</td></tr>
<tr><th id="313">313</th><td></td></tr>
<tr><th id="314">314</th><td>    <b>if</b> (<a class="local col0 ref" href="#160append" title='append' data-ref="160append">append</a>) {</td></tr>
<tr><th id="315">315</th><td>        <a class="macro" href="#81" title="ec = sys::fs::openFileForWrite(p, fd, sys::fs::F_RW | sys::fs::F_Append)" data-ref="_M/OPEN_FOR_APPEND">OPEN_FOR_APPEND</a>;</td></tr>
<tr><th id="316">316</th><td>        <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(fd &gt;= <var>0</var>);</td></tr>
<tr><th id="317">317</th><td>    } <b>else</b> {</td></tr>
<tr><th id="318">318</th><td>      <a class="macro" href="#74" title="ec = sys::fs::createUniqueFile((p + random_pattern), fd, TmpPath, sys::fs::perms::owner_read | sys::fs::perms::owner_write);" data-ref="_M/CREATE_UNIQUE_FILE">CREATE_UNIQUE_FILE</a>(<a class="tu ref" href="#random_pattern" title='random_pattern' data-use='r' data-ref="random_pattern">random_pattern</a>);</td></tr>
<tr><th id="319">319</th><td>      <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(fd &gt;= <var>0</var>);</td></tr>
<tr><th id="320">320</th><td>    }</td></tr>
<tr><th id="321">321</th><td></td></tr>
<tr><th id="322">322</th><td>    <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#write" title='write' data-ref="write">write</a>(<a class="local col2 ref" href="#162fd" title='fd' data-ref="162fd">fd</a>, <a class="local col8 ref" href="#158content" title='content' data-ref="158content">content</a>, (<a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a>)<a class="local col9 ref" href="#159count" title='count' data-ref="159count">count</a>) &lt; (<a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a>)<a class="local col9 ref" href="#159count" title='count' data-ref="159count">count</a>)</td></tr>
<tr><th id="325">325</th><td>      <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="326">326</th><td></td></tr>
<tr><th id="327">327</th><td><u>#<span data-ppcond="327">ifdef</span> <a class="macro" href="../../config.h.html#44" data-ref="_M/HAVE_FDATASYNC">HAVE_FDATASYNC</a></u></td></tr>
<tr><th id="328">328</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#fdatasync" title='fdatasync' data-ref="fdatasync">fdatasync</a>(<a class="local col2 ref" href="#162fd" title='fd' data-ref="162fd">fd</a>))</td></tr>
<tr><th id="329">329</th><td>      <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="330">330</th><td><u>#<span data-ppcond="327">elif</span> defined(HAVE_FSYNC)</u></td></tr>
<tr><th id="331">331</th><td>    <b>if</b> (fsync(fd))</td></tr>
<tr><th id="332">332</th><td>      <b>return</b> errno ? -errno : -<var>1</var>;</td></tr>
<tr><th id="333">333</th><td><u>#<span data-ppcond="327">endif</span></u></td></tr>
<tr><th id="334">334</th><td></td></tr>
<tr><th id="335">335</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#close" title='close' data-ref="close">close</a>(<a class="local col2 ref" href="#162fd" title='fd' data-ref="162fd">fd</a>))</td></tr>
<tr><th id="336">336</th><td>      <b>return</b> -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a>;</td></tr>
<tr><th id="337">337</th><td></td></tr>
<tr><th id="338">338</th><td>    <b>if</b> (<a class="local col0 ref" href="#160append" title='append' data-ref="160append">append</a>)</td></tr>
<tr><th id="339">339</th><td>      <b>return</b> <var>0</var>;</td></tr>
<tr><th id="340">340</th><td>    <b>else</b> {</td></tr>
<tr><th id="341">341</th><td>      <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col7 decl" id="167t" title='t' data-type='llvm::Twine' data-ref="167t">t</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_15SmallVectorImplIcEE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_15SmallVectorImplIcEE">(</a><a class="local col5 ref" href="#165TmpPath" title='TmpPath' data-ref="165TmpPath">TmpPath</a>);</td></tr>
<tr><th id="342">342</th><td>      <b>return</b> <a class="ref" href="#_Z12pocl_rename2RN4llvm5TwineES1_" title='pocl_rename2' data-ref="_Z12pocl_rename2RN4llvm5TwineES1_">pocl_rename2</a>(<span class='refarg'><a class="local col7 ref" href="#167t" title='t' data-ref="167t">t</a></span>, <span class='refarg'><a class="local col4 ref" href="#164p" title='p' data-ref="164p">p</a></span>);</td></tr>
<tr><th id="343">343</th><td>    }</td></tr>
<tr><th id="344">344</th><td>}</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td><i>/* write content[count] into a temporary file, and return the tempfile name in</i></td></tr>
<tr><th id="347">347</th><td><i> * output_path */</i></td></tr>
<tr><th id="348">348</th><td><em>int</em> <dfn class="decl def" id="pocl_write_tempfile" title='pocl_write_tempfile' data-ref="pocl_write_tempfile">pocl_write_tempfile</dfn>(<em>char</em> *<dfn class="local col8 decl" id="168output_path" title='output_path' data-type='char *' data-ref="168output_path">output_path</dfn>, <em>const</em> <em>char</em> *<dfn class="local col9 decl" id="169prefix" title='prefix' data-type='const char *' data-ref="169prefix">prefix</dfn>,</td></tr>
<tr><th id="349">349</th><td>                        <em>const</em> <em>char</em> *<dfn class="local col0 decl" id="170suffix" title='suffix' data-type='const char *' data-ref="170suffix">suffix</dfn>, <em>const</em> <em>char</em> *<dfn class="local col1 decl" id="171content" title='content' data-type='const char *' data-ref="171content">content</dfn>,</td></tr>
<tr><th id="350">350</th><td>                        <a class="typedef" href="../../../include/stdint.h.html#uint64_t" title='uint64_t' data-type='unsigned long' data-ref="uint64_t">uint64_t</a> <dfn class="local col2 decl" id="172count" title='count' data-type='uint64_t' data-ref="172count">count</dfn>, <em>int</em> *<dfn class="local col3 decl" id="173ret_fd" title='ret_fd' data-type='int *' data-ref="173ret_fd">ret_fd</dfn>) {</td></tr>
<tr><th id="351">351</th><td>  <em>int</em> <dfn class="local col4 decl" id="174fd" title='fd' data-type='int' data-ref="174fd">fd</dfn>;</td></tr>
<tr><th id="352">352</th><td>  <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col5 decl" id="175ec" title='ec' data-type='std::error_code' data-ref="175ec">ec</dfn>;</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td>  <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(output_path);</td></tr>
<tr><th id="355">355</th><td>  <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(content);</td></tr>
<tr><th id="356">356</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col6 decl" id="176p" title='p' data-type='llvm::Twine' data-ref="176p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col9 ref" href="#169prefix" title='prefix' data-ref="169prefix">prefix</a>);</td></tr>
<tr><th id="357">357</th><td>  <b>if</b> (<a class="local col0 ref" href="#170suffix" title='suffix' data-ref="170suffix">suffix</a> == <span class="macro" title="__null" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="358">358</th><td>    <a class="local col0 ref" href="#170suffix" title='suffix' data-ref="170suffix">suffix</a> = <q>""</q>;</td></tr>
<tr><th id="359">359</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col7 decl" id="177suf" title='suf' data-type='llvm::Twine' data-ref="177suf">suf</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col0 ref" href="#170suffix" title='suffix' data-ref="170suffix">suffix</a>);</td></tr>
<tr><th id="360">360</th><td>  <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#llvm::SmallString" title='llvm::SmallString' data-ref="llvm::SmallString">SmallString</a>&lt;<var>512</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallStringC1Ev" title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev"></a><dfn class="local col8 decl" id="178TmpPath" title='TmpPath' data-type='SmallString&lt;512&gt;' data-ref="178TmpPath">TmpPath</dfn>;</td></tr>
<tr><th id="361">361</th><td></td></tr>
<tr><th id="362">362</th><td>  <a class="macro" href="#74" title="ec = sys::fs::createUniqueFile((p + random_pattern + suf), fd, TmpPath, sys::fs::perms::owner_read | sys::fs::perms::owner_write);" data-ref="_M/CREATE_UNIQUE_FILE">CREATE_UNIQUE_FILE</a>(<a class="tu ref" href="#random_pattern" title='random_pattern' data-use='r' data-ref="random_pattern">random_pattern</a> <a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvmplERKNS_5TwineES2_" title='llvm::operator+' data-ref="_ZN4llvmplERKNS_5TwineES2_">+</a> <a class="local col7 ref" href="#177suf" title='suf' data-ref="177suf">suf</a>);</td></tr>
<tr><th id="363">363</th><td>  <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="364">364</th><td>  <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(fd &gt;= <var>0</var>);</td></tr>
<tr><th id="365">365</th><td></td></tr>
<tr><th id="366">366</th><td>  <a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a> <dfn class="local col9 decl" id="179writeb" title='writeb' data-type='ssize_t' data-ref="179writeb">writeb</dfn> = <a class="ref" href="../../../include/unistd.h.html#write" title='write' data-ref="write">write</a>(<a class="local col4 ref" href="#174fd" title='fd' data-ref="174fd">fd</a>, <a class="local col1 ref" href="#171content" title='content' data-ref="171content">content</a>, (<a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a>)<a class="local col2 ref" href="#172count" title='count' data-ref="172count">count</a>);</td></tr>
<tr><th id="367">367</th><td>  <b>if</b> (<a class="local col9 ref" href="#179writeb" title='writeb' data-ref="179writeb">writeb</a> &lt; (<a class="typedef" href="../../../include/unistd.h.html#ssize_t" title='ssize_t' data-type='__ssize_t' data-ref="ssize_t">ssize_t</a>)<a class="local col2 ref" href="#172count" title='count' data-ref="172count">count</a>) {</td></tr>
<tr><th id="368">368</th><td>    <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="369">369</th><td>  }</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><u>#<span data-ppcond="371">ifdef</span> <a class="macro" href="../../config.h.html#44" data-ref="_M/HAVE_FDATASYNC">HAVE_FDATASYNC</a></u></td></tr>
<tr><th id="372">372</th><td>  <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#fdatasync" title='fdatasync' data-ref="fdatasync">fdatasync</a>(<a class="local col4 ref" href="#174fd" title='fd' data-ref="174fd">fd</a>)) {</td></tr>
<tr><th id="373">373</th><td>    <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="374">374</th><td>  }</td></tr>
<tr><th id="375">375</th><td><u>#<span data-ppcond="371">elif</span> defined(HAVE_FSYNC)</u></td></tr>
<tr><th id="376">376</th><td>  <b>if</b> (fsync(fd))</td></tr>
<tr><th id="377">377</th><td>    <b>return</b> errno ? -errno : -<var>1</var>;</td></tr>
<tr><th id="378">378</th><td><u>#<span data-ppcond="371">endif</span></u></td></tr>
<tr><th id="379">379</th><td></td></tr>
<tr><th id="380">380</th><td>  <b>if</b> (<a class="local col3 ref" href="#173ret_fd" title='ret_fd' data-ref="173ret_fd">ret_fd</a>)</td></tr>
<tr><th id="381">381</th><td>    *<a class="local col3 ref" href="#173ret_fd" title='ret_fd' data-ref="173ret_fd">ret_fd</a> = <a class="local col4 ref" href="#174fd" title='fd' data-ref="174fd">fd</a>;</td></tr>
<tr><th id="382">382</th><td>  <b>else</b></td></tr>
<tr><th id="383">383</th><td>    <a class="ref" href="../../../include/unistd.h.html#close" title='close' data-ref="close">close</a>(<a class="local col4 ref" href="#174fd" title='fd' data-ref="174fd">fd</a>);</td></tr>
<tr><th id="384">384</th><td></td></tr>
<tr><th id="385">385</th><td>  <a class="ref" href="../../../include/string.h.html#strncpy" title='strncpy' data-ref="strncpy">strncpy</a>(<a class="local col8 ref" href="#168output_path" title='output_path' data-ref="168output_path">output_path</a>, <a class="local col8 ref" href="#178TmpPath" title='TmpPath' data-ref="178TmpPath">TmpPath</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/ADT/SmallString.h.html#_ZN4llvm11SmallString5c_strEv" title='llvm::SmallString::c_str' data-ref="_ZN4llvm11SmallString5c_strEv">c_str</a>(), <a class="macro" href="../../include/pocl.h.html#48" title="1024" data-ref="_M/POCL_FILENAME_LENGTH">POCL_FILENAME_LENGTH</a>);</td></tr>
<tr><th id="386">386</th><td>  <b>return</b> <var>0</var>;</td></tr>
<tr><th id="387">387</th><td>}</td></tr>
<tr><th id="388">388</th><td></td></tr>
<tr><th id="389">389</th><td><i>/* Atomic write of IR - with rename() */</i></td></tr>
<tr><th id="390">390</th><td><em>int</em> <dfn class="decl def" id="pocl_write_module" title='pocl_write_module' data-ref="pocl_write_module">pocl_write_module</dfn>(<em>void</em> *<dfn class="local col0 decl" id="180module" title='module' data-type='void *' data-ref="180module">module</dfn>, <em>const</em> <em>char</em>* <dfn class="local col1 decl" id="181path" title='path' data-type='const char *' data-ref="181path">path</dfn>, <em>int</em> <dfn class="local col2 decl" id="182dont_rewrite" title='dont_rewrite' data-type='int' data-ref="182dont_rewrite">dont_rewrite</dfn>) {</td></tr>
<tr><th id="391">391</th><td></td></tr>
<tr><th id="392">392</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(module);</td></tr>
<tr><th id="393">393</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(path);</td></tr>
<tr><th id="394">394</th><td>    <em>int</em> <dfn class="local col3 decl" id="183fd" title='fd' data-type='int' data-ref="183fd">fd</dfn>;</td></tr>
<tr><th id="395">395</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col4 decl" id="184p" title='p' data-type='llvm::Twine' data-ref="184p">p</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc">(</a><a class="local col1 ref" href="#181path" title='path' data-ref="181path">path</a>);</td></tr>
<tr><th id="396">396</th><td>    <span class="namespace">std::</span><a class="type" href="../../../include/c++/7/system_error.html#std::error_code" title='std::error_code' data-ref="std::error_code">error_code</a> <a class="ref fake" href="../../../include/c++/7/system_error.html#_ZNSt10error_codeC1Ev" title='std::error_code::error_code' data-ref="_ZNSt10error_codeC1Ev"></a><dfn class="local col5 decl" id="185ec" title='ec' data-type='std::error_code' data-ref="185ec">ec</dfn>;</td></tr>
<tr><th id="397">397</th><td></td></tr>
<tr><th id="398">398</th><td>    <b>if</b> (<a class="ref" href="#_Z12pocl_exists2RN4llvm5TwineE" title='pocl_exists2' data-ref="_Z12pocl_exists2RN4llvm5TwineE">pocl_exists2</a>(<span class='refarg'><a class="local col4 ref" href="#184p" title='p' data-ref="184p">p</a></span>)) {</td></tr>
<tr><th id="399">399</th><td>      <b>if</b> (<a class="local col2 ref" href="#182dont_rewrite" title='dont_rewrite' data-ref="182dont_rewrite">dont_rewrite</a>)</td></tr>
<tr><th id="400">400</th><td>        <b>return</b> <var>0</var>;</td></tr>
<tr><th id="401">401</th><td>      <b>else</b> {</td></tr>
<tr><th id="402">402</th><td>        <em>int</em> <dfn class="local col6 decl" id="186res" title='res' data-type='int' data-ref="186res">res</dfn> = <a class="ref" href="#_Z12pocl_remove2RN4llvm5TwineE" title='pocl_remove2' data-ref="_Z12pocl_remove2RN4llvm5TwineE">pocl_remove2</a>(<span class='refarg'><a class="local col4 ref" href="#184p" title='p' data-ref="184p">p</a></span>);</td></tr>
<tr><th id="403">403</th><td>        <b>if</b> (<a class="local col6 ref" href="#186res" title='res' data-ref="186res">res</a>)</td></tr>
<tr><th id="404">404</th><td>          <b>return</b> <a class="local col6 ref" href="#186res" title='res' data-ref="186res">res</a>;</td></tr>
<tr><th id="405">405</th><td>      }</td></tr>
<tr><th id="406">406</th><td>    }</td></tr>
<tr><th id="407">407</th><td></td></tr>
<tr><th id="408">408</th><td>    <i>/* To avoid corrupted .bc files, create a tmp file first and</i></td></tr>
<tr><th id="409">409</th><td><i>       then rename it */</i></td></tr>
<tr><th id="410">410</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<em>char</em>, <var>128</var>&gt; <a class="ref fake" href="../../../include/llvm-6.0/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col7 decl" id="187TmpPath" title='TmpPath' data-type='SmallVector&lt;char, 128&gt;' data-ref="187TmpPath">TmpPath</dfn>;</td></tr>
<tr><th id="411">411</th><td>    <a class="macro" href="#74" title="ec = sys::fs::createUniqueFile((p + random_pattern), fd, TmpPath, sys::fs::perms::owner_read | sys::fs::perms::owner_write);" data-ref="_M/CREATE_UNIQUE_FILE">CREATE_UNIQUE_FILE</a>(<a class="tu ref" href="#random_pattern" title='random_pattern' data-use='r' data-ref="random_pattern">random_pattern</a>);</td></tr>
<tr><th id="412">412</th><td>    <a class="macro" href="../../../include/assert.h.html#50" title="(static_cast&lt;void&gt; (0))" data-ref="_M/assert">assert</a>(fd &gt;= <var>0</var>);</td></tr>
<tr><th id="413">413</th><td></td></tr>
<tr><th id="414">414</th><td><u>#<span data-ppcond="414">ifdef</span> <a class="macro" href="../../include/pocl.h.html#382" data-ref="_M/LLVM_OLDER_THAN_7_0">LLVM_OLDER_THAN_7_0</a></u></td></tr>
<tr><th id="415">415</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/Support/raw_ostream.h.html#llvm::raw_fd_ostream" title='llvm::raw_fd_ostream' data-ref="llvm::raw_fd_ostream">raw_fd_ostream</a> <dfn class="local col8 decl" id="188os" title='os' data-type='llvm::raw_fd_ostream' data-ref="188os">os</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/Support/raw_ostream.h.html#_ZN4llvm14raw_fd_ostreamC1Eibb" title='llvm::raw_fd_ostream::raw_fd_ostream' data-ref="_ZN4llvm14raw_fd_ostreamC1Eibb">(</a><a class="local col3 ref" href="#183fd" title='fd' data-ref="183fd">fd</a>, <var>1</var>, <span class="namespace">sys::fs::</span><a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::OpenFlags::F_RW" title='llvm::sys::fs::OpenFlags::F_RW' data-ref="llvm::sys::fs::OpenFlags::F_RW">F_RW</a> <a class="ref" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#_ZN4llvm3sys2fsorENS1_9OpenFlagsES2_" title='llvm::sys::fs::operator|' data-ref="_ZN4llvm3sys2fsorENS1_9OpenFlagsES2_">|</a> <span class="namespace">sys::fs::</span><a class="enum" href="../../../include/llvm-6.0/llvm/Support/FileSystem.h.html#llvm::sys::fs::OpenFlags::F_Excl" title='llvm::sys::fs::OpenFlags::F_Excl' data-ref="llvm::sys::fs::OpenFlags::F_Excl">F_Excl</a>);</td></tr>
<tr><th id="416">416</th><td>    <a class="macro" href="#72" title="if (ec) return ec.default_error_condition().value()" data-ref="_M/RETURN_IF_EC">RETURN_IF_EC</a>;</td></tr>
<tr><th id="417">417</th><td>    <a class="ref" href="../../../include/llvm-6.0/llvm/Bitcode/BitcodeWriter.h.html#_ZN4llvm18WriteBitcodeToFileEPKNS_6ModuleERNS_11raw_ostreamEbPKNS_18ModuleSummaryIndexEbPSt5arrayIjLm5EE" title='llvm::WriteBitcodeToFile' data-ref="_ZN4llvm18WriteBitcodeToFileEPKNS_6ModuleERNS_11raw_ostreamEbPKNS_18ModuleSummaryIndexEbPSt5arrayIjLm5EE">WriteBitcodeToFile</a>((<span class="namespace">llvm::</span><a class="type" href="../../../include/llvm-6.0/llvm/IR/Module.h.html#llvm::Module" title='llvm::Module' data-ref="llvm::Module">Module</a>*)<a class="local col0 ref" href="#180module" title='module' data-ref="180module">module</a>, <span class='refarg'><a class="local col8 ref" href="#188os" title='os' data-ref="188os">os</a></span>);</td></tr>
<tr><th id="418">418</th><td><u>#<span data-ppcond="414">else</span></u></td></tr>
<tr><th id="419">419</th><td>    raw_fd_ostream os(fd, <b>true</b>);</td></tr>
<tr><th id="420">420</th><td>    RETURN_IF_EC;</td></tr>
<tr><th id="421">421</th><td>    WriteBitcodeToFile(*(llvm::Module*)module, os);</td></tr>
<tr><th id="422">422</th><td><u>#<span data-ppcond="414">endif</span></u></td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>    <a class="local col8 ref" href="#188os" title='os' data-ref="188os">os</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostream5flushEv" title='llvm::raw_ostream::flush' data-ref="_ZN4llvm11raw_ostream5flushEv">flush</a>();</td></tr>
<tr><th id="425">425</th><td><u>#<span data-ppcond="425">ifdef</span> <a class="macro" href="../../config.h.html#44" data-ref="_M/HAVE_FDATASYNC">HAVE_FDATASYNC</a></u></td></tr>
<tr><th id="426">426</th><td>    <b>if</b> (<a class="ref" href="../../../include/unistd.h.html#fdatasync" title='fdatasync' data-ref="fdatasync">fdatasync</a>(<a class="local col3 ref" href="#183fd" title='fd' data-ref="183fd">fd</a>))</td></tr>
<tr><th id="427">427</th><td>      <b>return</b> <a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> ? -<a class="macro" href="../../../include/x86_64-linux-gnu/bits/errno.h.html#54" title="(*__errno_location ())" data-ref="_M/errno">errno</a> : -<var>1</var>;</td></tr>
<tr><th id="428">428</th><td><u>#<span data-ppcond="425">elif</span> defined(HAVE_FSYNC)</u></td></tr>
<tr><th id="429">429</th><td>    <b>if</b> (fsync(fd))</td></tr>
<tr><th id="430">430</th><td>      <b>return</b> errno ? -errno : -<var>1</var>;</td></tr>
<tr><th id="431">431</th><td><u>#<span data-ppcond="425">endif</span></u></td></tr>
<tr><th id="432">432</th><td></td></tr>
<tr><th id="433">433</th><td>    <a class="local col8 ref" href="#188os" title='os' data-ref="188os">os</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/Support/raw_ostream.h.html#_ZN4llvm14raw_fd_ostream5closeEv" title='llvm::raw_fd_ostream::close' data-ref="_ZN4llvm14raw_fd_ostream5closeEv">close</a>();</td></tr>
<tr><th id="434">434</th><td>    <b>if</b> (<a class="local col8 ref" href="#188os" title='os' data-ref="188os">os</a>.<a class="ref" href="../../../include/llvm-6.0/llvm/Support/raw_ostream.h.html#_ZNK4llvm14raw_fd_ostream9has_errorEv" title='llvm::raw_fd_ostream::has_error' data-ref="_ZNK4llvm14raw_fd_ostream9has_errorEv">has_error</a>())</td></tr>
<tr><th id="435">435</th><td>      <b>return</b> <var>1</var>;</td></tr>
<tr><th id="436">436</th><td></td></tr>
<tr><th id="437">437</th><td>    <a class="type" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#llvm::Twine" title='llvm::Twine' data-ref="llvm::Twine">Twine</a> <dfn class="local col9 decl" id="189t" title='t' data-type='llvm::Twine' data-ref="189t">t</dfn><a class="ref" href="../../../include/llvm-6.0/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_15SmallVectorImplIcEE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_15SmallVectorImplIcEE">(</a><a class="local col7 ref" href="#187TmpPath" title='TmpPath' data-ref="187TmpPath">TmpPath</a>);</td></tr>
<tr><th id="438">438</th><td>    <b>return</b> <a class="ref" href="#_Z12pocl_rename2RN4llvm5TwineES1_" title='pocl_rename2' data-ref="_Z12pocl_rename2RN4llvm5TwineES1_">pocl_rename2</a>(<span class='refarg'><a class="local col9 ref" href="#189t" title='t' data-ref="189t">t</a></span>, <span class='refarg'><a class="local col4 ref" href="#184p" title='p' data-ref="184p">p</a></span>);</td></tr>
<tr><th id="439">439</th><td>}</td></tr>
<tr><th id="440">440</th><td></td></tr>
<tr><th id="441">441</th><td><i>/****************************************************************************/</i></td></tr>
<tr><th id="442">442</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Oct-28</em> from project pocl revision <em>v1.4-RC2-44-gf1dee8d</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
